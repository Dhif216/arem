import{j as s}from"./index-BnW8xQQU.js";import{r as n,L as _}from"./react-vendor-BgZu1yuc.js";/* empty css                 */import{s as j}from"./productsService-DoJy3abI.js";import{u as N}from"./i18n-vendor-DSlEIxXL.js";const w=()=>{const{t:r,i18n:m}=N(),d=m.language,[c,u]=n.useState("all"),[i,p]=n.useState([]),[g,h]=n.useState(!0);n.useEffect(()=>{const e=j(t=>{const o=(t||[]).map(a=>({id:a.id,slug:a.slug,category:a.category||"other",price:a.price,image:a.image,name_fr:a.name_fr,name_tn:a.name_tn,desc_fr:a.desc_fr,desc_tn:a.desc_tn,isFirebase:!0}));p(o),h(!1)});return()=>e()},[]);const l=n.useMemo(()=>c==="all"?i:i.filter(e=>e.category===c),[c,i]),f=["all","honeyed","dry","seasonal"],x=({product:e})=>{const t=e.isFirebase?d==="tn"?e.name_tn||e.name_fr:e.name_fr||e.name_tn:r(`products.${e.nameKey}`),o=e.isFirebase?d==="tn"?e.desc_tn||e.desc_fr:e.desc_fr||e.desc_tn:r(`products.${e.descriptionKey}`);return s.jsxs("div",{className:"product-listing-card",children:[s.jsx("div",{className:"card-image",children:s.jsx("img",{src:e.image,alt:t,loading:"lazy"})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:t}),s.jsxs("p",{className:"price",children:[e.price.toFixed(2)," ",r("products.price_unit")]}),s.jsx("p",{className:"description",children:o}),s.jsx(_,{to:`/products/${e.slug}`,className:"details-link",children:r("home.discover_cta")}),s.jsx("a",{className:"order-wa",href:`https://wa.me/21654477309?text=${encodeURIComponent(`${r("products.order_whatsapp_message","Bonjour, je souhaite commander")}: ${t} (${e.price.toFixed(2)} ${r("products.price_unit")})`)}`,target:"_blank",rel:"noopener noreferrer",children:r("products.order_whatsapp","Commander sur WhatsApp")})]})]})};return s.jsxs("div",{className:"products-page",children:[s.jsx("h1",{className:"page-heading",children:r("nav.products")}),s.jsx("div",{className:"category-filter-bar",children:f.map(e=>s.jsx("button",{className:`filter-button ${c===e?"active":""}`,onClick:()=>u(e),children:r(`categories.${e}`)},e))}),s.jsx("div",{className:"product-list-grid",children:g?s.jsx("p",{className:"no-products",children:r("products.loading","Chargement des produits...")}):l.length>0?l.map(e=>s.jsx(x,{product:e},e.id)):s.jsx("p",{className:"no-products",children:r("products.no_items")||"No sweets found in this category."})})]})};export{w as default};
