import{j as s}from"./index-DQtX4zVn.js";import{r as c,L as _}from"./react-vendor-BgZu1yuc.js";import{M as u}from"./Products-Df7ZIIB7.js";import{s as x}from"./productsService-JffnRdkQ.js";import{u as j}from"./i18n-vendor-DSlEIxXL.js";const C=()=>{const{t:r,i18n:h}=j(),d=h.language,[n,p]=c.useState("all"),[i,l]=c.useState(u);c.useEffect(()=>{const e=x(t=>{if(t&&t.length>0){const o=t.map(a=>({id:a.id,slug:a.slug,category:a.category||"other",price:a.price,image:a.image,name_fr:a.name_fr,name_tn:a.name_tn,desc_fr:a.desc_fr,desc_tn:a.desc_tn,isFirebase:!0}));l(o)}else l(u)});return()=>e()},[]);const m=c.useMemo(()=>n==="all"?i:i.filter(e=>e.category===n),[n,i]),g=["all","honeyed","dry","seasonal"],f=({product:e})=>{const t=e.isFirebase?d==="tn"?e.name_tn||e.name_fr:e.name_fr||e.name_tn:r(`products.${e.nameKey}`),o=e.isFirebase?d==="tn"?e.desc_tn||e.desc_fr:e.desc_fr||e.desc_tn:r(`products.${e.descriptionKey}`);return s.jsxs("div",{className:"product-listing-card",children:[s.jsx("div",{className:"card-image",children:s.jsx("img",{src:e.image,alt:t,loading:"lazy"})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:t}),s.jsxs("p",{className:"price",children:[e.price.toFixed(2)," ",r("products.price_unit")]}),s.jsx("p",{className:"description",children:o}),s.jsx(_,{to:`/products/${e.slug}`,className:"details-link",children:r("home.discover_cta")}),s.jsx("a",{className:"order-wa",href:`https://wa.me/21654477309?text=${encodeURIComponent(`${r("products.order_whatsapp_message","Bonjour, je souhaite commander")}: ${t} (${e.price.toFixed(2)} ${r("products.price_unit")})`)}`,target:"_blank",rel:"noopener noreferrer",children:r("products.order_whatsapp","Commander sur WhatsApp")})]})]})};return s.jsxs("div",{className:"products-page",children:[s.jsx("h1",{className:"page-heading",children:r("nav.products")}),s.jsx("div",{className:"category-filter-bar",children:g.map(e=>s.jsx("button",{className:`filter-button ${n===e?"active":""}`,onClick:()=>p(e),children:r(`categories.${e}`)},e))}),s.jsx("div",{className:"product-list-grid",children:m.length>0?m.map(e=>s.jsx(f,{product:e},e.id)):s.jsx("p",{className:"no-products",children:r("products.no_items")||"No sweets found in this category."})})]})};export{C as default};
