import{_ as y,j as e}from"./index-K5uPTL1m.js";import{r as c,e as F}from"./react-vendor-BgZu1yuc.js";import"./i18n-vendor-DSlEIxXL.js";const T=()=>{const[l,o]=c.useState([]),[d,h]=c.useState(null),[m,u]=c.useState(!1),g=F(),[a,t]=c.useState({nameFr:"",nameTn:"",descriptionFr:"",descriptionTn:"",price:"",category:"makroud",image:"",featured:!1});c.useEffect(()=>{j()},[]);const j=()=>{const r=localStorage.getItem("products");r?o(JSON.parse(r)):y(()=>import("./products-Dl7IXn74.js"),[]).then(n=>{const s=n.MOCK_PRODUCTS.map(i=>({id:i.slug,name:{fr:i.nameKey,tn:i.nameKey},description:{fr:i.descriptionKey,tn:i.descriptionKey},price:i.price,category:i.category,image:i.image,featured:!1}));o(s),localStorage.setItem("products",JSON.stringify(s))})},x=r=>{localStorage.setItem("products",JSON.stringify(r)),o(r)},v=()=>{localStorage.removeItem("adminAuth"),localStorage.removeItem("adminUsername"),g("/admin/login")},f=r=>{r.preventDefault();const n={id:d?.id||`product-${Date.now()}`,name:{fr:a.nameFr,tn:a.nameTn},description:{fr:a.descriptionFr,tn:a.descriptionTn},price:parseFloat(a.price),category:a.category,image:a.image,featured:a.featured};let s;d?s=l.map(i=>i.id===d.id?n:i):s=[...l,n],x(s),p()},N=r=>{h(r),t({nameFr:r.name.fr,nameTn:r.name.tn,descriptionFr:r.description.fr,descriptionTn:r.description.tn,price:r.price.toString(),category:r.category,image:r.image,featured:r.featured||!1}),u(!0)},b=r=>{if(confirm("ÃŠtes-vous sÃ»r de vouloir supprimer ce produit?")){const n=l.filter(s=>s.id!==r);x(n)}},p=()=>{t({nameFr:"",nameTn:"",descriptionFr:"",descriptionTn:"",price:"",category:"makroud",image:"",featured:!1}),h(null),u(!1)};return e.jsxs("div",{className:"admin-dashboard",children:[e.jsx("header",{className:"admin-header",children:e.jsxs("div",{className:"admin-header-content",children:[e.jsx("h1",{children:"ğŸ° Admin Dashboard"}),e.jsxs("div",{className:"admin-user-info",children:[e.jsxs("span",{children:["ğŸ‘¤ ",localStorage.getItem("adminUsername")]}),e.jsx("button",{onClick:v,className:"logout-btn",children:"DÃ©connexion"})]})]})}),e.jsxs("div",{className:"admin-content",children:[e.jsxs("div",{className:"admin-actions",children:[e.jsx("button",{onClick:()=>u(!m),className:"add-product-btn",children:m?"âœ– Annuler":"â• Ajouter un produit"}),e.jsxs("div",{className:"product-count",children:["Total: ",e.jsx("strong",{children:l.length})," produits"]})]}),m&&e.jsxs("div",{className:"product-form-container",children:[e.jsx("h2",{children:d?"Modifier le produit":"Nouveau produit"}),e.jsxs("form",{onSubmit:f,className:"product-form",children:[e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nom (FranÃ§ais) *"}),e.jsx("input",{type:"text",value:a.nameFr,onChange:r=>t({...a,nameFr:r.target.value}),required:!0,placeholder:"Ex: Makroud"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nom (Arabe) *"}),e.jsx("input",{type:"text",value:a.nameTn,onChange:r=>t({...a,nameTn:r.target.value}),required:!0,placeholder:"Ex: Ù…Ù‚Ø±ÙˆØ¶",dir:"rtl"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (FranÃ§ais) *"}),e.jsx("textarea",{value:a.descriptionFr,onChange:r=>t({...a,descriptionFr:r.target.value}),required:!0,rows:3,placeholder:"Description en franÃ§ais"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description (Arabe) *"}),e.jsx("textarea",{value:a.descriptionTn,onChange:r=>t({...a,descriptionTn:r.target.value}),required:!0,rows:3,placeholder:"Ø§Ù„ÙˆØµÙ Ø¨Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©",dir:"rtl"})]})]}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Prix (TND) *"}),e.jsx("input",{type:"number",step:"0.01",value:a.price,onChange:r=>t({...a,price:r.target.value}),required:!0,placeholder:"Ex: 12.50"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CatÃ©gorie *"}),e.jsxs("select",{value:a.category,onChange:r=>t({...a,category:r.target.value}),required:!0,children:[e.jsx("option",{value:"makroud",children:"Makroud"}),e.jsx("option",{value:"baklava",children:"Baklava"}),e.jsx("option",{value:"zlabia",children:"Zlabia"}),e.jsx("option",{value:"kaak",children:"Kaak"}),e.jsx("option",{value:"autres",children:"Autres"})]})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Image du produit *"}),e.jsxs("div",{className:"image-upload-container",children:[e.jsxs("div",{className:"upload-options",children:[e.jsx("button",{type:"button",className:"upload-tab",onClick:()=>document.getElementById("imageFileInput")?.click(),children:"ğŸ“ TÃ©lÃ©charger depuis l'appareil"}),e.jsx("span",{style:{margin:"0 10px",color:"#999"},children:"ou"}),e.jsx("input",{type:"text",value:a.image,onChange:r=>t({...a,image:r.target.value}),placeholder:"Entrer une URL d'image",style:{flex:1}})]}),e.jsx("input",{id:"imageFileInput",type:"file",accept:"image/*",style:{display:"none"},onChange:r=>{const n=r.target.files?.[0];if(n){const s=new FileReader;s.onloadend=()=>{t({...a,image:s.result})},s.readAsDataURL(n)}}}),a.image&&e.jsx("div",{className:"image-preview",children:e.jsx("img",{src:a.image,alt:"Preview",onError:r=>{r.target.src="https://via.placeholder.com/150?text=Image+Error"}})})]})]}),e.jsx("div",{className:"form-group checkbox-group",children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:a.featured,onChange:r=>t({...a,featured:r.target.checked})}),"Produit vedette"]})}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:d?"ğŸ’¾ Mettre Ã  jour":"â• Ajouter"}),e.jsx("button",{type:"button",onClick:p,className:"cancel-btn",children:"Annuler"})]})]})]}),e.jsxs("div",{className:"products-list",children:[e.jsx("h2",{children:"Liste des produits"}),e.jsx("div",{className:"products-table-container",children:e.jsxs("table",{className:"products-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Image"}),e.jsx("th",{children:"Nom"}),e.jsx("th",{children:"CatÃ©gorie"}),e.jsx("th",{children:"Prix"}),e.jsx("th",{children:"Vedette"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:l.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"no-products",children:"Aucun produit. Ajoutez votre premier produit!"})}):l.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("img",{src:r.image,alt:r.name.fr,className:"product-thumb"})}),e.jsx("td",{children:e.jsxs("div",{className:"product-names",children:[e.jsx("div",{children:r.name.fr}),e.jsx("div",{className:"product-name-ar",children:r.name.tn})]})}),e.jsx("td",{children:e.jsx("span",{className:"category-badge",children:r.category})}),e.jsx("td",{children:e.jsxs("strong",{children:[r.price.toFixed(2)," TND"]})}),e.jsx("td",{children:r.featured?"â­":"-"}),e.jsx("td",{children:e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{onClick:()=>N(r),className:"edit-btn",title:"Modifier",children:"âœï¸"}),e.jsx("button",{onClick:()=>b(r.id),className:"delete-btn",title:"Supprimer",children:"ğŸ—‘ï¸"})]})})]},r.id))})]})})]})]})]})};export{T as default};
