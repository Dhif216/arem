import{j as s}from"./index-K5uPTL1m.js";import{r as c,L as x}from"./react-vendor-BgZu1yuc.js";import{MOCK_PRODUCTS as f}from"./products-Dl7IXn74.js";/* empty css                 */import{u as j}from"./i18n-vendor-DSlEIxXL.js";const P=()=>{const{t:r,i18n:m}=j(),d=m.language,[o,p]=c.useState("all"),[i,u]=c.useState(f);c.useEffect(()=>{const e=localStorage.getItem("products");if(e)try{const n=JSON.parse(e).map(t=>({id:parseInt(t.id.replace("product-",""))||Math.floor(Math.random()*1e4),slug:t.id,category:t.category,price:t.price,image:t.image,nameKey:t.id,descriptionKey:t.id+"_desc",name:t.name,description:t.description}));u(n)}catch(a){console.error("Error loading products from localStorage:",a)}},[]);const l=c.useMemo(()=>o==="all"?i:i.filter(e=>e.category===o),[o,i]),h=["all","honeyed","dry","seasonal"],g=({product:e})=>{const a=e.name?d==="tn"?e.name.tn:e.name.fr:r(`products.${e.nameKey}`),n=e.description?d==="tn"?e.description.tn:e.description.fr:r(`products.${e.descriptionKey}`);return s.jsxs("div",{className:"product-listing-card",children:[s.jsx("div",{className:"card-image",children:s.jsx("img",{src:e.image,alt:a,loading:"lazy"})}),s.jsxs("div",{className:"card-content",children:[s.jsx("h3",{children:a}),s.jsxs("p",{className:"price",children:[e.price.toFixed(2)," ",r("products.price_unit")]}),s.jsx("p",{className:"description",children:n}),s.jsx(x,{to:`/products/${e.slug}`,className:"details-link",children:r("home.discover_cta")}),s.jsx("a",{className:"order-wa",href:`https://wa.me/21654477309?text=${encodeURIComponent(`${r("products.order_whatsapp_message","Bonjour, je souhaite commander")}: ${a} (${e.price.toFixed(2)} ${r("products.price_unit")})`)}`,target:"_blank",rel:"noopener noreferrer",children:r("products.order_whatsapp","Commander sur WhatsApp")})]})]})};return s.jsxs("div",{className:"products-page",children:[s.jsx("h1",{className:"page-heading",children:r("nav.products")}),s.jsx("div",{className:"category-filter-bar",children:h.map(e=>s.jsx("button",{className:`filter-button ${o===e?"active":""}`,onClick:()=>p(e),children:r(`categories.${e}`)},e))}),s.jsx("div",{className:"product-list-grid",children:l.length>0?l.map(e=>s.jsx(g,{product:e},e.id)):s.jsx("p",{className:"no-products",children:r("products.no_items")||"No sweets found in this category."})})]})};export{P as default};
